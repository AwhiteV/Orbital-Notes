# 桌面贴图功能使用指南

## 功能概述

桌面贴图功能允许您将截图固定在桌面上，作为浮动的参考图片。这对于以下场景非常有用：
- 📌 保留设计稿作为开发参考
- 📝 记录临时信息
- 🎨 对比设计效果
- 📊 查看数据图表

## 使用方法

### 方式一：从截图创建贴图

1. **启动截图**
   - 按下 `F1` 键（或您自定义的截图快捷键）
   - 屏幕会变暗并显示十字光标

2. **选择区域**
   - 按住鼠标左键拖拽，选择要截取的区域
   - 松开鼠标后会显示工具栏

3. **创建贴图**
   - 点击工具栏上的 `📌 Pin` 按钮
   - 或直接按 `F3` 键
   - 贴图窗口会自动出现在屏幕中央

### 方式二：从剪贴板创建贴图

1. **复制图片到剪贴板**
   - 在任何应用中复制图片（Ctrl+C）
   - 或使用截图工具的 Copy 功能

2. **创建贴图**
   - 按 `F3` 键（或您自定义的贴图快捷键）
   - 贴图窗口会自动出现

## 贴图窗口功能

### 移动贴图
- **拖拽**：点击图片任意位置并拖动即可移动窗口
- 窗口始终保持在所有窗口之上（Always on Top）

### 调整大小
- **手动调整**：拖拽窗口边缘或角落
- **自动调整**：创建时会根据图片大小自动设置合适的窗口尺寸
  - 最大不超过屏幕的 50%
  - 保持图片原始宽高比
  - 最小尺寸：150x100 像素

### 关闭贴图
- **鼠标操作**：
  1. 将鼠标移到贴图窗口上
  2. 右上角会出现红色的 `✖` 关闭按钮
  3. 点击即可关闭
  
- **关闭按钮特点**：
  - 只有鼠标悬停时才显示（避免遮挡图片）
  - 圆形红色按钮，易于识别
  - 点击时有缩放动画反馈

### 多贴图管理
- 可以同时创建多个贴图窗口
- 每个贴图窗口独立管理
- 关闭应用时自动清理所有贴图

## 快捷键总结

| 功能 | 默认快捷键 | 说明 |
|------|-----------|------|
| 截图 | `F1` | 进入截图模式 |
| 从剪贴板贴图 | `F3` | 将剪贴板中的图片创建为贴图 |
| 从截图贴图 | 截图后按 `F3` | 在截图工具栏中 |
| 取消截图 | `Esc` | 退出截图模式 |
| 复制到剪贴板 | 截图后按 `Enter` | 在截图模式中 |

> 💡 **提示**：所有快捷键都可以在 Settings → Shortcuts 中自定义

## 窗口特性

### 视觉效果
- **透明背景**：窗口背景透明，只显示图片
- **阴影效果**：图片带有柔和的阴影，增强立体感
- **边框**：半透明白色边框，清晰区分图片边界
- **圆角**：4px 圆角，现代化设计

### 窗口行为
- ✅ **始终置顶**：贴图窗口永远在其他窗口之上
- ✅ **可拖动**：整个图片区域都可以拖动
- ✅ **可调整大小**：支持自由调整窗口尺寸
- ✅ **保持比例**：图片会自动适应窗口（contain 模式）
- ❌ **不可最小化**：避免误操作
- ❌ **不可最大化**：贴图应该保持合适的尺寸

## 技术实现

### 窗口配置
```javascript
{
    frame: false,              // 无边框窗口
    transparent: true,         // 透明背景
    alwaysOnTop: true,        // 始终置顶
    skipTaskbar: false,       // 在任务栏显示
    resizable: true,          // 可调整大小
    minimizable: false,       // 禁止最小化
    maximizable: false,       // 禁止最大化
    hasShadow: true          // 启用窗口阴影
}
```

### 拖拽实现
使用 Electron 的 `-webkit-app-region` CSS 属性：
```css
#container {
    -webkit-app-region: drag;  /* 整个容器可拖拽 */
}

.controls {
    -webkit-app-region: no-drag;  /* 控制按钮不可拖拽 */
}
```

### 图片适配
```css
#pinned-image {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;  /* 保持比例，完整显示 */
}
```

## 最佳实践

### 推荐使用场景

1. **开发参考**
   - 截取设计稿并贴在屏幕一侧
   - 对照着设计图写代码

2. **临时备忘**
   - 截取重要信息
   - 临时需要查看的数据

3. **多屏幕对比**
   - 截取多个界面状态
   - 并排对比查看

4. **会议记录**
   - 截取会议中的重要幻灯片
   - 贴在桌面作为参考

### 使用技巧

1. **合理控制贴图数量**
   - 同时打开太多贴图会影响视觉
   - 建议不超过 3-5 个

2. **选择合适的位置**
   - 避免遮挡常用应用
   - 可以放在屏幕边缘或角落

3. **及时清理**
   - 不需要的贴图及时关闭
   - 保持桌面整洁

4. **配合截图使用**
   - 截图 → 贴图 → 参考 → 关闭
   - 形成高效工作流

## 常见问题

### Q: 贴图窗口太大/太小怎么办？
**A**: 拖拽窗口边缘可以手动调整大小。窗口会保持图片比例。

### Q: 如何快速关闭所有贴图？
**A**: 关闭 Orbital Notes 应用，所有贴图会自动清理。

### Q: 贴图窗口被其他窗口遮挡了？
**A**: 这不应该发生。贴图窗口设置为始终置顶。如果出现此问题，请检查其他应用是否也使用了 always-on-top。

### Q: 可以保存贴图吗？
**A**: 当前版本不支持保存贴图。贴图是临时的，关闭后会消失。未来版本可能会添加持久化功能。

### Q: 贴图窗口在任务栏显示吗？
**A**: 是的，每个贴图窗口都会在任务栏显示，方便管理。

### Q: 可以将贴图设置为半透明吗？
**A**: 当前版本不支持。这是一个很好的功能建议，可能在未来版本中添加。

## 性能说明

- **内存占用**：每个贴图窗口约占用 50-100MB 内存（取决于图片大小）
- **CPU 使用**：静态贴图几乎不占用 CPU
- **建议**：对于大图片（>5MB），创建贴图前可以考虑先压缩

## 更新日志

### v1.0.0 (2026-01-06)
- ✅ 基础贴图功能
- ✅ 拖拽移动
- ✅ 调整大小
- ✅ 自动计算窗口尺寸
- ✅ 悬停显示关闭按钮
- ✅ 多贴图支持

## 未来计划

- [ ] 贴图透明度调节
- [ ] 贴图持久化（保存/加载）
- [ ] 贴图分组管理
- [ ] 快速切换贴图显示/隐藏
- [ ] 贴图标注功能
- [ ] 贴图导出

---

💡 **提示**：有任何问题或建议，欢迎反馈！
